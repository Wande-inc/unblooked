const gameTab=document.querySelector("#gameTab button"),movieTab=document.querySelector("#movieTab button"),searchTab=document.querySelector("#searchTab button"),popTab=document.querySelector("#popTab button");let games=null,movies=null;const iframe=document.getElementById("iframeCon");let isFull=!1;const fullscreenItem=document.getElementById("iframeCon"),fullscreenButton=document.getElementById("fullscreen"),popular=document.getElementById("popular"),bigMovie=document.querySelector("#bigMovie button"),sMovies=document.querySelectorAll(".oMovies button"),bigGames=document.querySelectorAll(".bigGame button"),sGames=document.querySelectorAll(".sGame button");let x=0;function convert(e){return e===gameTab?"games":e===movieTab?"movies":e===searchTab?"search":e===popTab?"popular":"iframe"===e?"iframe":null}function select(e){e&&(e.style.borderBottom="2px solid #fc0303");const n=convert(e);document.getElementById(n)&&(document.getElementById(n).style.display="flex")}function deselect(e){e&&"iframe"!=e&&(e.style.borderBottom="none");const n=convert(e);document.getElementById(n)&&(document.getElementById(n).style.display="none"),"iframe"===e&&(iframe.src=null)}function openGames(){games=document.querySelector("#games .gameDiv"),select(gameTab),deselect(movieTab),deselect(searchTab),deselect(popTab),deselect("iframe"),makeGames()}function openMovies(){movies=document.querySelector("#movies .movieDiv"),select(movieTab),deselect(gameTab),deselect(searchTab),deselect(popTab),deselect("iframe"),makeMovies()}function openSearch(){games=document.querySelector(".searchCon .gameDiv"),movies=document.querySelector(".searchCon .movieDiv"),select(searchTab),deselect(movieTab),deselect(gameTab),deselect(popTab),deselect("iframe"),makeGames(),makeMovies()}function openPopular(){select(popTab),deselect(movieTab),deselect(gameTab),deselect(searchTab),deselect("iframe"),makePopular()}function openIframe(e,n,t){deselect(popTab),deselect(movieTab),deselect(gameTab),deselect(searchTab),document.getElementById("iframe")&&(document.getElementById("iframe").style.display="flex",document.getElementById("iframeName").innerHTML=n,iframe.src="iframe.html",iframe.onload=function(){const n={action:"executeFunction",data:{param1:`${e}/${t}`}};iframe.contentWindow.postMessage(n,"*")},iframe.src=iframe.src)}function fullscreen(){isFull?(fullscreenButton.classList.remove("fsButton"),fullscreenItem.classList.remove("fullScreen"),fullscreenItem.src=fullscreenItem.src,isFull=!1):(fullscreenButton.className="fsButton",fullscreenItem.className="fullScreen",fullscreenItem.src=fullscreenItem.src,isFull=!0)}function addHTML(e,n){e.innerHTML=e.innerHTML+n}function removeHTML(e){e.innerHTML=""}function makePopular(){fetch("https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/movies.json?v="+Date.now()).then((e=>e.json())).then((e=>{e.forEach((e=>{x<=4&&(0===x?(bigMovie.onclick=function(){openIframe("movies",e.name,e.id)},bigMovie.style.backgroundImage=`url('https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/movies/${e.id}/img.${e.img}')`,bigMovie.querySelector(".backdrop span").innerHTML=e.name):(sMovies[x-1].onclick=function(){openIframe("movies",e.name,e.id)},sMovies[x-1].style.backgroundImage=`url('https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/movies/${e.id}/img.${e.img}')`,sMovies[x-1].querySelector(".backdrop span").innerHTML=e.name)),x++}))})),fetch("https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/games.json?v="+Date.now()).then((e=>e.json())).then((e=>{x=0,e.forEach((e=>{x<=7&&(x<=1?(bigGames[x].onclick=function(){openIframe("games",e.name,e.id)},bigGames[x].style.backgroundImage=`url('https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/games/${e.id}/img.${e.img}')`,bigGames[x].querySelector(".backdrop span").innerHTML=e.name):(sGames[x-2].onclick=function(){openIframe("games",e.name,e.id)},sGames[x-2].style.backgroundImage=`url('https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/games/${e.id}/img.${e.img}')`,sGames[x-2].querySelector(".backdrop span").innerHTML=e.name)),x++}))}))}function makeGames(){removeHTML(games);fetch(`https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/games.json?v=${Date.now()}`).then((e=>e.json())).then((e=>{e.forEach((e=>{addHTML(games,`<div class="bigGame searchItem">\n            <button id="game-${e.id}" class="noOutline playable" onclick="openIframe('games', '${e.name}', '${e.id}')" style="background-image: url('https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/games/${e.id}/img.${e.img}');">\n              <div class="backdrop"><div></div><i class="fa fa-play"></i><span>${e.name}</span></div>\n            </button>\n          </div>`)}))}))}function makeMovies(){removeHTML(movies);fetch(`https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/movies.json?v=${Date.now()}`).then((e=>e.json())).then((e=>{e.forEach((e=>{addHTML(movies,`<div class="oMovies searchItem">\n            <button id="movie-${e.id}" class="noOutline playable" onclick="openIframe('movies', '${e.name}', '${e.id}')" style="background-image: url('https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/client/movies/${e.id}/img.${e.img}');">\n              <div class="backdrop"><div></div><i class="fa fa-play"></i><span>${e.name}</span></div>\n            </button>\n          </div>`)}))}))}openPopular(),openPopular(),openPopular(),document.getElementById("searchInput").addEventListener("input",(function(){let e=this.value.toLowerCase();document.querySelectorAll(".searchItem").forEach((n=>{let t=n.querySelector(".backdrop span").innerHTML.toLowerCase();n.style.display=t.includes(e)?"flex":"none"}))})),window.top!==window.self&&(document.body.innerHTML=""),document.head.innerHTML=document.head.innerHTML+`    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/assets/site/style/univ.css?v=${Date.now()}" />\n    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/assets/site/style/navbar.css?v=${Date.now()}" />\n    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/assets/site/style/footer.css?v=${Date.now()}" />\n    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wande-inc/unblooked@main/assets/site/style/tabs.css?v=${Date.now()}" />`;
